
 NX   Running target serve for project cooking-ai-api and 1 task it depends on:



> nx run cooking-ai-api:build

assets by path *.json 50.7 KiB
  asset package-lock.json 50.3 KiB [emitted]
  asset package.json 350 bytes [emitted]
asset main.js 23.5 KiB [emitted] (name: main)
asset assets/.gitkeep 0 bytes [emitted] [from: apps/cooking-ai-api/src/assets/.gitkeep] [copied]
cacheable modules 21.2 KiB
  modules by path ./apps/cooking-ai-api/src/app/ 10.5 KiB 4 modules
  ./apps/cooking-ai-api/src/main.ts 2.85 KiB [built] [code generated]
  ./apps/cooking-ai-api/src/utils/mockRecipes.ts 7.87 KiB [built] [code generated]
modules by path external "@nestjs/ 126 bytes
  external "@nestjs/core" 42 bytes [built] [code generated]
  external "@nestjs/common" 42 bytes [built] [code generated]
  external "@nestjs/config" 42 bytes [built] [code generated]
external "tslib" 42 bytes [built] [code generated]
external "dotenv" 42 bytes [built] [code generated]
external "path" 42 bytes [built] [code generated]
external "fs" 42 bytes [built] [code generated]
external "net" 42 bytes [built] [code generated]
external "@google/generative-ai" 42 bytes [built] [code generated]
webpack 5.99.5 compiled successfully in 4211 ms

> nx run cooking-ai-api:serve

> node dist/apps/cooking-ai-api/main.js

Found .env file at: /home/sid/workspace/mycooking-ai/apps/cooking-ai-api/.env
Successfully loaded .env file
GEMINI_API_KEY is set
[32m[Nest] 29135  - [39m04/15/2025, 2:26:36 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
AppModule: Loading environment variables...
AppModule: GEMINI_API_KEY from process.env: AIzaSyBugUp9KyazmQ74XqGrntlszlzatg6ibFA
[32m[Nest] 29135  - [39m04/15/2025, 2:26:36 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +20ms[39m
[32m[Nest] 29135  - [39m04/15/2025, 2:26:36 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 29135  - [39m04/15/2025, 2:26:36 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 29135  - [39m04/15/2025, 2:26:36 PM [32m    LOG[39m [38;5;3m[RecipesService] [39m[32mInitializing Google Generative AI...[39m
[32m[Nest] 29135  - [39m04/15/2025, 2:26:36 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRecipesModule dependencies initialized[39m[38;5;3m +2ms[39m
Port 3001 is available
[32m[Nest] 29135  - [39m04/15/2025, 2:26:36 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mRecipesController {/api}:[39m[38;5;3m +12ms[39m
[32m[Nest] 29135  - [39m04/15/2025, 2:26:36 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api, GET} route[39m[38;5;3m +5ms[39m
[32m[Nest] 29135  - [39m04/15/2025, 2:26:36 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/generate-recipes, POST} route[39m[38;5;3m +2ms[39m
[32m[Nest] 29135  - [39m04/15/2025, 2:26:36 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/vote, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 29135  - [39m04/15/2025, 2:26:36 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +4ms[39m
API is listening on port 3001
API: Received request with body: {
  ingredients: [32m'rice, pepper, tomatoes, o
  #  Node.js[5274]: void node::ResetStdio() at ../src/node.cc:739
  #  Assertion failed: !(err != 0) || (err == -1 && (*__errno_location ()) == 1)

----- Native stack trace -----

 1: 0xcc7bb7 node::Assert(node::AssertionInfo const&) [node]
 2: 0xc76804  [node]
 3: 0x786560847a76  [/lib/x86_64-linux-gnu/libc.so.6]
 4: 0x786560847bbe  [/lib/x86_64-linux-gnu/libc.so.6]
 5: 0xbd946f node::DefaultProcessExitHandlerInternal(node::Environment*, node::ExitCode) [node]
 6: 0xc37aaf node::Environment::Exit(node::ExitCode) [node]
 7: 0xf6e67f v8::internal::FunctionCallbackArguments::Call(v8::internal::CallHandlerInfo) [node]
 8: 0xf6eeed  [node]
 9: 0xf6f3b5 v8::internal::Builtin_HandleApiCall(int, unsigned long*, v8::internal::Isolate*) [node]
10: 0x1979df6  [node]

  #  Node.js[5274]: void node::ResetStdio() at ../src/node.cc:739
  #  Assertion failed: !(err != 0) || (err == -1 && (*__errno_location ()) == 1)

----- Native stack trace -----

 1: 0xcc7bb7 node::Assert(node::AssertionInfo const&) [node]
 2: 0xc76804  [node]
 3: 0xc76e1d node::TrapWebAssemblyOrContinue(int, siginfo_t*, void*) [node]
 4: 0x786560845330  [/lib/x86_64-linux-gnu/libc.so.6]
 5: 0x15022e528609 
/15/2025, 2:27:09 PM [32m    LOG[39m [38;5;3m[RecipesService] [39m[32mReceived response 6/6 from Gemini API.[39m
[32m[Nest] 29135  - [39m04/15/2025, 2:27:09 PM [32m    LOG[39m [38;5;3m[RecipesService] [39m[32mReceived response 2/6 from Gemini API.[39m
[32m[Nest] 29135  - [39m04/15/2025, 2:27:09 PM [32m    LOG[39m [38;5;3m[RecipesService] [39m[32mReceived response 3/6 from Gemini API.[39m
[32m[Nest] 29135  - [39m04/15/2025, 2:27:09 PM [32m    LOG[39m [38;5;3m[RecipesService] [39m[32mReceived response 4/6 from Gemini API.[39m
[32m[Nest] 29135  - [39m04/15/2025, 2:27:09 PM [32m    LOG[39m [38;5;3m[RecipesService] [39m[32mReceived response 1/6 from Gemini API.[39m
[32m[Nest] 29135  - [39m04/15/2025, 2:27:09 PM [32m    LOG[39m [38;5;3m[RecipesService] [39m[32mReceived response 5/6 from Gemini API.[39m
API: Generated recipes: [
  {
    title: [32m'Pepperonata Rice with Roasted Tomatoes and Caramelized Onions'[39m,
    description: [32m'This recipe creates a vibrant and flavorful rice dish featuring roasted tomatoes, caramelized onions... (Recipe 1 of 6)'[39m,
    ingredients: [
      [32m'* 1 large red onion, thinly sliced'[39m,
      [32m'* 2 red bell peppers, cored, seeded, and roughly chopped'[39m,
      [32m'* 1 yellow bell pepper, cored, seeded, and roughly chopped'[39m,
      [32m'* 1/2 red chili pepper, finely minced (or more, to taste)'[39m,
      [32m'* 2 cloves garlic, minced'[39m,
      [32m'* 1 (28 ounce) can crushed tomatoes'[39m,
      [32m'* 1 cup Arborio rice'[39m,
      [32m'* 2 cups vegetable broth (or chicken broth)'[39m,
      [32m'* 1/4 cup extra virgin olive oil'[39m,
      [32m'* 2 pints cherry or grape tomatoes, halved'[39m,
      [32m'* 1 teaspoon dried oregano'[39m,
      [32m'* 1/2 teaspoon dried basil'[39m,
      [32m'* Salt and freshly ground black pepper to taste'[39m,
      [32m'* Fresh basil leaves, for garnish (optional)'[39m,
      [32m'* Grated Parmesan cheese, for garnish (optional)'[39m
    ],
    instructions: [
      [32m'1. **Roast the Tomatoes:** Preheat oven to 400Â°F (200Â°C). Toss the halved cherry tomatoes with 2 tablespoons of olive oil, salt, and pepper. Spread them in a single layer on a baking sheet and roast for 20-25 minutes, or until they are softened and slightly blistered.'[39m
    ],
    score: [33m0[39m
  },
  {
    title: [32m'Arrosticini di Riso al Peperone e Pomodoro â€“ Rice Skewers with Peppers & Tomatoes'[39m,
    description: [32m'This recipe transforms simple rice, peppers, and tomatoes into flavorful and visually appealing skew... (Recipe 2 of 6)'[39m,
    ingredients: [
      [32m'* 1 cup Arborio rice'[39m,
      [32m'* 2 large red bell peppers, cored, seeded, and cut into 1-inch pieces'[39m,
      [32m'* 1 (28 ounce) can crushed tomatoes'[39m,
      [32m'* 1 large red onion, thinly sliced'[39m,
      [32m'* 2 cloves garlic, minced'[39m,
      [32m'* 1/4 cup extra virgin olive oil'[39m,
      [32m'* 2 tablespoons chopped fresh basil'[39m,
      [32m'* 1 tablespoon dried oregano'[39m,
      [32m'* 1 teaspoon salt'[39m,
      [32m'* 1/2 teaspoon black pepper'[39m,
      [32m'* 1/4 cup grated Parmesan cheese (optional)'[39m,
      [32m'* Wooden skewers, soaked in water for at least 30 minutes'[39m
    ],
    instructions: [
      [32m'1. **Cook the Rice:** Cook the Arborio rice according to package directions.  Do not overcook; it should be firm to the bite.  Once cooked, spread the rice on a baking sheet to cool completely.'[39m
    ],
    score: [33m0[39m
  },
  {
    title: [32m'Arrosto di Riso con Peperoni e Pomodori al Forno (Baked Rice Roast with Peppers and Tomatoes)'[39m,
    description: [32m'This unique recipe transforms simple rice into a hearty, baked dish, showcasing the sweetness of roa... (Recipe 3 of 6)'[39m,
    ingredients: [
      [32m'* 1 large red bell pepper (about 200g), cored, seeded, and roughly chopped'[39m,
      [32m'* 1 large yellow bell pepper (about 200g), cored, seeded, and roughly chopped'[39m,
      [32m'* 1 large onion (about 200g), roughly chopped'[39m,
      [32m'* 2 cloves garlic, minced'[39m,
      [32m'* 1 (700g) can of crushed tomatoes'[39m,
      [32m'* 2 cups (400g) Arborio rice'[39m,
      [32m'* 4 cups (1 litre) vegetable broth, warmed'[39m,
      [32m'* 1/2 cup (60g) grated Parmesan cheese'[39m,
      [32m'* 1/4 cup (30g) chopped fresh basil'[39m,
      [32m'* 2 tablespoons olive oil'[39m,
      [32m'* Salt and freshly ground black pepper to taste'[39m
    ],
    instructions: [
      [32m'1. **Roast the Vegetables:** Preheat your oven to 200Â°C (400Â°F). Toss the chopped bell peppers and onion with 1 tablespoon of olive oil, salt, and pepper on a large baking sheet. Roast for 20-25 minutes, or until the vegetables are tender and slightly charred.'[39m
    ],
    score: [33m0[39m
  },
  {
    title: [32m'Arrosto di Riso con Peperoni e Pomodori al Forno (Baked Rice with Peppers and Tomatoes)'[39m,
    description: [32m'This unique recipe transforms simple rice into a flavorful, baked dish with roasted peppers and toma... (Recipe 4 of 6)'[39m,
    ingredients: [
      [32m'* 1 large red bell pepper (about 200g), cored, seeded, and roughly chopped'[39m,
      [32m'* 1 large yellow bell pepper (about 200g), cored, seeded, and roughly chopped'[39m,
      [32m'* 1 large onion (about 200g), finely chopped'[39m,
      [32m'* 2 cloves garlic, minced'[39m,
      [32m'* 1 (700g) can of crushed tomatoes'[39m,
      [32m'* 250g Arborio rice'[39m,
      [32m'* 500ml hot vegetable broth'[39m,
      [32m'* 50g grated Parmesan cheese'[39m,
      [32m'* 2 tablespoons extra virgin olive oil'[39m,
      [32m'* 1 teaspoon dried oregano'[39m,
      [32m'* 1/2 teaspoon dried basil'[39m,
      [32m'* Salt and freshly ground black pepper to taste'[39m,
      [32m'* Fresh basil leaves, for garnish (optional)'[39m
    ],
    instructions: [
      [32m'1. **Preheat oven to 200Â°C (180Â°C fan/Gas Mark 6).** Lightly grease a large oven-safe dish (approximately 2-litre capacity).'[39m
    ],
    score: [33m0[39m
  },
  {
    title: [32m'Pepperonata Rice Bake with Burst Tomatoes'[39m,
    description: [32m'This vibrant bake combines the sweetness of roasted peppers and tomatoes with the heartiness of rice... (Recipe 5 of 6)'[39m,
    ingredients: [
      [32m'* 1 large red bell pepper, cored, seeded, and roughly chopped'[39m,
      [32m'* 1 large yellow bell pepper, cored, seeded, and roughly chopped'[39m,
      [32m'* 1 large red onion, roughly chopped'[39m,
      [32m'* 1 (28 ounce) can crushed tomatoes'[39m,
      [32m'* 1 cup Arborio rice'[39m,
      [32m'* 2 cups vegetable broth (or chicken broth for richer flavor)'[39m,
      [32m'* 1/2 cup grated Parmesan cheese'[39m,
      [32m'* 2 cloves garlic, minced'[39m,
      [32m'* 2 tablespoons olive oil'[39m,
      [32m'* 1 teaspoon dried oregano'[39m,
      [32m'* 1/2 teaspoon dried basil'[39m,
      [32m'* 1/4 teaspoon red pepper flakes (or more, to taste)'[39m,
      [32m'* Salt and freshly ground black pepper to taste'[39m,
      [32m'* Fresh basil leaves, for garnish (optional)'[39m
    ],
    instructions: [
      [32m'1. **Roast the Peppers:** Preheat your oven to 200Â°C (400Â°F). Toss the chopped bell peppers and red onion with 1 tablespoon of olive oil, salt, and pepper. Spread them in a single layer on a baking sheet. Roast for 20-25 minutes, or until the peppers are softened and slightly charred.'[39m
    ],
    score: [33m0[39m
  },
  {
    title: [32m'# Pepperonata-Stuffed Rice Shells with Burst Cherry Tomatoes'[39m,
    description: [32m'This recipe features vibrant roasted peppers and onions creating a flavorful filling for baked rice ... (Recipe 6 of 6)'[39m,
    ingredients: [
      [32m'* 1 large red bell pepper'[39m,
      [32m'* 1 large yellow bell pepper'[39m,
      [32m'* 1 large red onion'[39m,
      [32m'* 2 cloves garlic, minced'[39m,
      [32m'* 1 (28 ounce) can crushed tomatoes'[39m,
      [32m'* 1 cup Arborio rice'[39m,
      [32m'* 1 cup chicken broth (or vegetable broth for vegetarian option)'[39m,
      [32m'* 1/2 cup dry white wine'[39m,
      [32m'* 1/4 cup grated Parmesan cheese'[39m,
      [32m'* 1 pint cherry tomatoes'[39m,
      [32m'* 2 tablespoons olive oil'[39m,
      [32m'* 1 teaspoon dried oregano'[39m,
      [32m'* 1/2 teaspoon dried basil'[39m,
      [32m'* Salt and freshly ground black pepper to taste'[39m,
      [32m'* Fresh basil leaves, for garnish (optional)'[39m
    ],
    instructions: [
      [32m'1. **Prepare the Pepperonata:** Preheat oven to 400Â°F (200Â°C). Halve the bell peppers lengthwise, remove seeds and membranes.  Cut the red onion into wedges. Toss peppers and onions with 1 tablespoon olive oil, salt, and pepper. Roast for 30-40 minutes, or until peppers are tender and slightly charred.'[39m
    ],
    score: [33m0[39m
  }
]
Warning: command "node dist/apps/cooking-ai-api/main.js" exited with non-zero status code
  #  Node.js[29033]: void node::ResetStdio() at ../src/node.cc:739
  #  Assertion failed: !(err != 0) || (err == -1 && (*__errno_location ()) == 1)

----- Native stack trace -----

 1: 0xcc7bb7 node::Assert(node::AssertionInfo const&) [node]
 2: 0xc76804  [node]
 3: 0x7870dc047a76  [/lib/x86_64-linux-gnu/libc.so.6]
 4: 0x7870dc047bbe  [/lib/x86_64-linux-gnu/libc.so.6]
 5: 0xbd946f node::DefaultProcessExitHandlerInternal(node::Environment*, node::ExitCode) [node]
 6: 0xc37aaf node::Environment::Exit(node::ExitCode) [node]
 7: 0xf6e67f v8::internal::FunctionCallbackArguments::Call(v8::internal::CallHandlerInfo) [node]
 8: 0xf6eeed  [node]
 9: 0xf6f3b5 v8::internal::Builtin_HandleApiCall(int, unsigned long*, v8::internal::Isolate*) [node]
10: 0x1979df6  [node]

  #  Node.js[29033]: void node::ResetStdio() at ../src/node.cc:739
  #  Assertion failed: !(err != 0) || (err == -1 && (*__errno_location ()) == 1)

----- Native stack trace -----

 1: 0xcc7bb7 node::Assert(node::AssertionInfo const&) [node]
 2: 0xc76804  [node]
 3: 0xc76e1d node::TrapWebAssemblyOrContinue(int, siginfo_t*, void*) [node]
 4: 0x7870dc045330  [/lib/x86_64-linux-gnu/libc.so.6]
 5: 0x15a9ce0 v8::internal::tracing::TraceEventHelper::GetTracingController() [node]
 6: 0x1080685 v8::internal::Isolate::CaptureDetailedStackTrace(int, v8::StackTrace::StackTraceOptions) [node]
 7: 0xf0efa0 v8::StackTrace::CurrentStackTrace(v8::Isolate*, int, v8::StackTrace::StackTraceOptions) [node]
 8: 0xcc7b16 node::GetCurrentStackTrace(v8::Isolate*, int) [node]
 9: 0xc196ab node::DumpJavaScriptBacktrace(_IO_FILE*) [node]
10: 0xcc7bc3 node::Assert(node::AssertionInfo const&) [node]
11: 0xc76804  [node]
12: 0x7870dc047a76  [/lib/x86_64-linux-gnu/libc.so.6]
13: 0x7870dc047bbe  [/lib/x86_64-linux-gnu/libc.so.6]
14: 0xbd946f node::DefaultProcessExitHandlerInternal(node::Environment*, node::ExitCode) [node]
15: 0xc37aaf node::Environment::Exit(node::ExitCode) [node]
16: 0xf6e67f v8::internal::FunctionCallbackArguments::Call(v8::internal::CallHandlerInfo) [node]
17: 0xf6eeed  [node]
18: 0xf6f3b5 v8::internal::Builtin_HandleApiCall(int, unsigned long*, v8::internal::Isolate*) [node]
19: 0x1979df6  [node]
