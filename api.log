
 NX   Running target serve for project cooking-ai-api and 1 task it depends on:



> nx run cooking-ai-api:build  [existing outputs match the cache, left as is]

assets by path *.json 50.7 KiB
  asset package-lock.json 50.3 KiB [emitted]
  asset package.json 350 bytes [emitted]
asset main.js 23.5 KiB [emitted] (name: main)
asset assets/.gitkeep 0 bytes [emitted] [from: apps/cooking-ai-api/src/assets/.gitkeep] [copied]
cacheable modules 21.2 KiB
  modules by path ./apps/cooking-ai-api/src/app/ 10.5 KiB 4 modules
  ./apps/cooking-ai-api/src/main.ts 2.85 KiB [built] [code generated]
  ./apps/cooking-ai-api/src/utils/mockRecipes.ts 7.87 KiB [built] [code generated]
modules by path external "@nestjs/ 126 bytes
  external "@nestjs/core" 42 bytes [built] [code generated]
  external "@nestjs/common" 42 bytes [built] [code generated]
  external "@nestjs/config" 42 bytes [built] [code generated]
external "tslib" 42 bytes [built] [code generated]
external "dotenv" 42 bytes [built] [code generated]
external "path" 42 bytes [built] [code generated]
external "fs" 42 bytes [built] [code generated]
external "net" 42 bytes [built] [code generated]
external "@google/generative-ai" 42 bytes [built] [code generated]
webpack 5.99.5 compiled successfully in 4211 ms

> nx run cooking-ai-api:serve

> node dist/apps/cooking-ai-api/main.js

Found .env file at: /home/sid/workspace/mycooking-ai/apps/cooking-ai-api/.env
Successfully loaded .env file
GEMINI_API_KEY is set
[32m[Nest] 57386  - [39m04/15/2025, 4:40:04 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
AppModule: Loading environment variables...
AppModule: GEMINI_API_KEY from process.env: AIzaSyBugUp9KyazmQ74XqGrntlszlzatg6ibFA
[32m[Nest] 57386  - [39m04/15/2025, 4:40:04 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +25ms[39m
[32m[Nest] 57386  - [39m04/15/2025, 4:40:04 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 57386  - [39m04/15/2025, 4:40:04 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 57386  - [39m04/15/2025, 4:40:04 PM [32m    LOG[39m [38;5;3m[RecipesService] [39m[32mInitializing Google Generative AI...[39m
[32m[Nest] 57386  - [39m04/15/2025, 4:40:04 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRecipesModule dependencies initialized[39m[38;5;3m +4ms[39m
Port 3001 is in use, trying 3002
Port 3002 is in use, trying 3003
Port 3003 is in use, trying 3004
Port 3004 is in use, trying 3005
Port 3005 is available
[32m[Nest] 57386  - [39m04/15/2025, 4:40:04 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mRecipesController {/api}:[39m[38;5;3m +20ms[39m
[32m[Nest] 57386  - [39m04/15/2025, 4:40:04 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api, GET} route[39m[38;5;3m +5ms[39m
[32m[Nest] 57386  - [39m04/15/2025, 4:40:04 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/generate-recipes, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 57386  - [39m04/15/2025, 4:40:04 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/vote, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 57386  - [39m04/15/2025, 4:40:04 PM [32m    LOG[3API: Received request with body: {
  ingredients: [32m'rice, tomatoe, pepper, onions'[39m,
  cuis
  #  Node.js[54483]: void node::ResetStdio() at ../src/node.cc:739
  #  Assertion failed: !(err != 0) || (err == -1 && (*__errno_location ()) == 1)

----- Native stack trace -----

 1: 0xcc7bb7 node::Assert(node::AssertionInfo const&) [node]
 2: 0xc76804  [node]
 3: 0x7e22aac47a76  [/lib/x86_64-linux-gnu/libc.so.6]
 4: 0x7e22aac47bbe  [/lib/x86_64-linux-gnu/libc.so.6]
 5: 0xbd946f node::DefaultProcessExitHandlerInternal(node::Environment*, node::ExitCode) [node]
 6: 0xc37aaf node::Environment::Exit(node::ExitCode) [node]
 7: 0xf6e67f v8::internal::FunctionCallbackArguments::Call(v8::internal::CallHandlerInfo) [node]
 8: 0xf6eeed  [node]
 9: 0xf6f3b5 v8::internal::Builtin_HandleApiCall(int, unsigned long*, v8::internal::Isolate*) [node]
10: 0x1979df6  [node]

  #  Node.js[54483]: void node::ResetStdio() at ../src/node.cc:739
  #  Assertion failed: !(err != 0) || (err == -1 && (*__errno_location ()) == 1)

----- Native stack trace -----

 1: 0xcc7bb7 node::Assert(node::AssertionInfo const&) [node]
 2: 0xc76804  [node]
 3: 0xc76e1d node::TrapWebAssemblyOrContinue(int, siginfo_t*, void*) [node]
 4: 0x7e22aac45330  [/lib/x86_64-linux-gnu/libc.so.6]
 5: 0x15a9ce0 v8::internal::tracing::TraceEventHelper::GetTracingController() [node]
 6: 0x1080685 v8::internal::Isolate::CaptureDetailedStackTrace(int, v8::StackTrace::StackTraceOptions) [node]
 7: 0xf0efa0 v8::StackTrace::CurrentStackTrace(v8::Isolate*, int, v8::StackTrace::StackTraceOptions) [node]
 8: 0xcc7b16 node::GetCurrentStackTrace(v8::Isolate*, int) [node]
 9: 0xc196ab node::DumpJavaScriptBacktrace(_IO_FILE*) [node]
10: 0xcc7bc3 node::Assert(node::AssertionInfo const&) [node]
11: 0xc76804  [node]
12: 0x7e22aac47a76  [/lib/x86_64-linux-gnu/libc.so.6]
13: 0x7e22aac47bbe  [/lib/x86_64-linux-gnu/libc.so.6]
14: 0xbd946f node::DefaultProcessExitHandlerInternal(node::Environment*, node::ExitCode) [node]
15: 0xc37aaf node::Environment::Exit(node::ExitCode) [node]
16: 0xf6e67f v8::internal::FunctionCallbackArguments::Call(v8::internal::CallHandlerInfo) [node]
17: 0xf6eeed  [node]
18: 0xf6f3b5 v8::internal::Builtin_HandleApiCall(int, unsigned long*, v8::internal::Isolate*) [node]
19: 0x1979df6  [node]
[32m'This recipe offers a unique take on rice, roasting it with tomatoes and peppers for a smoky, intense... (Recipe 1 of 6)'[39m,
    ingredients: [
      [32m'* 1 cup Arborio rice (or other short-grain rice)'[39m,
      [32m'* 2 large ripe tomatoes, roughly chopped'[39m,
      [32m'* 1 large red bell pepper, cored, seeded, and roughly chopped'[39m,
      [32m'* 1 medium yellow onion, roughly chopped'[39m,
      [32m'* 2 cloves garlic, minced'[39m,
      [32m'* 2 tablespoons extra virgin olive oil'[39m,
      [32m'* 1 teaspoon dried oregano'[39m,
      [32m'* Â½ teaspoon dried basil'[39m,
      [32m'* Â¼ teaspoon red pepper flakes (optional)'[39m,
      [32m'* Salt and freshly ground black pepper to taste'[39m,
      [32m'* Â½ cup vegetable broth (or water)'[39m
    ],
    instructions: [
      [32m'1. **Preheat & Prep:** Preheat your oven to 200Â°C (400Â°F).  In a large bowl, toss the chopped tomatoes, bell pepper, onion, and garlic with olive oil, oregano, basil, red pepper flakes (if using), salt, and pepper.'[39m
    ],
    score: [33m0[39m
  },
  {
    title: [32m'Arrosto di Riso al Forno con Peperoni e Cipolle (Baked Rice with Peppers and Onions)'[39m,
    description: [32m'This recipe offers a unique take on baked rice, creating a flavorful and comforting vegetarian main ... (Recipe 2 of 6)'[39m,
    ingredients: [
      [32m'* 1 large red bell pepper (about 200g), deseeded and roughly chopped'[39m,
      [32m'* 1 large yellow bell pepper (about 200g), deseeded and roughly chopped'[39m,
      [32m'* 1 large red onion (about 200g), thinly sliced'[39m,
      [32m'* 2 cloves garlic, minced'[39m,
      [32m'* 1 (400g) can of chopped tomatoes, drained'[39m,
      [32m'* 300g Arborio rice'[39m,
      [32m'* 600ml vegetable broth (or water)'[39m,
      [32m'* 50g grated Parmesan cheese (optional, for vegetarian but not vegan)'[39m,
      [32m'* 2 tbsp extra virgin olive oil'[39m,
      [32m'* 1 tsp dried oregano'[39m,
      [32m'* Â½ tsp dried basil'[39m,
      [32m'* Salt and freshly ground black pepper to taste'[39m,
      [32m'* Fresh basil leaves, for garnish (optional)'[39m
    ],
    instructions: [
      [32m'1. **Roast the peppers and onions:** Preheat your oven to 200Â°C (400Â°F). Toss the chopped peppers and sliced onions with 1 tbsp olive oil, salt, and pepper on a large baking tray. Roast for 25-30 minutes, or until the vegetables are tender and slightly caramelized, stirring halfway through.'[39m
    ],
    score: [33m0[39m
  },
  {
    title: [32m'Roasted Pepper & Tomato Rice with Caramelized Onions'[39m,
    description: [32m'This recipe delivers a vibrant and flavorful vegetarian dish, showcasing the sweetness of roasted pe... (Recipe 3 of 6)'[39m,
    ingredients: [
      [32m'* 1 large red onion, thinly sliced'[39m,
      [32m'* 2 large bell peppers (one red, one yellow), cored, seeded, and cut into large chunks'[39m,
      [32m'* 1 (28 ounce) can crushed tomatoes'[39m,
      [32m'* 1 cup Arborio rice'[39m,
      [32m'* 2 cups vegetable broth'[39m,
      [32m'* 2 cloves garlic, minced'[39m,
      [32m'* 2 tablespoons olive oil'[39m,
      [32m'* 1 teaspoon dried oregano'[39m,
      [32m'* Â½ teaspoon dried basil'[39m,
      [32m'* Salt and freshly ground black pepper to taste'[39m,
      [32m'* Fresh basil leaves, for garnish (optional)'[39m
    ],
    instructions: [
      [32m'1. **Caramelize the Onions:** Heat 1 tablespoon of olive oil in a large oven-safe skillet (cast iron is ideal) over medium heat. Add the sliced onions and cook, stirring occasionally, until deeply caramelized and golden brown, about 20-25 minutes.  This takes patience, but the result is worth it!'[39m
    ],
    score: [33m0[39m
  },
  {
    title: [32m'# Roasted Pepper & Tomato Rice with Caramelized Onion Glaze'[39m,
    description: [32m'This recipe delivers a vibrant and flavorful vegetarian meal, showcasing the sweetness of roasted pe... (Recipe 4 of 6)'[39m,
    ingredients: [
      [32m'* 1 large red bell pepper'[39m,
      [32m'* 1 large yellow bell pepper'[39m,
      [32m'* 1 large onion, thinly sliced'[39m,
      [32m'* 2 cups Arborio rice'[39m,
      [32m'* 1 (28 ounce) can crushed tomatoes'[39m,
      [32m'* 4 cups vegetable broth'[39m,
      [32m'* 2 cloves garlic, minced'[39m,
      [32m'* 1/4 cup extra virgin olive oil'[39m,
      [32m'* 1 teaspoon dried oregano'[39m,
      [32m'* 1/2 teaspoon dried basil'[39m,
      [32m'* Salt and freshly ground black pepper to taste'[39m,
      [32m'* Fresh parsley, chopped (for garnish)'[39m,
      [32m'* 1 tablespoon balsamic vinegar (optional)'[39m
    ],
    instructions: [
      [32m'1. **Roast the Peppers:** Preheat oven to 400Â°F (200Â°C).  Halve the bell peppers, remove seeds and membranes. Place cut-side down on a baking sheet lined with parchment paper. Roast for 30-40 minutes, or until the skins are blackened and blistered. Remove from oven and let cool slightly. Once cool enough to handle, peel off the skins and roughly chop the peppers.'[39m
    ],
    score: [33m0[39m
  },
  {
    title: [32m'# Arrosto di Riso al Pomodoro e Peperoni: Roasted Rice with Tomatoes and Peppers'[39m,
    description: [32m'This unique recipe transforms simple rice into a flavorful, almost crusty dish through roasting.  Th... (Recipe 5 of 6)'[39m,
    ingredients: [
      [32m'* 1 cup Arborio rice (or other short-grain rice)'[39m,
      [32m'* 2 large ripe tomatoes, cored and roughly chopped'[39m,
      [32m'* 1 large red bell pepper, cored, seeded, and roughly chopped'[39m,
      [32m'* 1 medium yellow onion, thinly sliced'[39m,
      [32m'* 2 cloves garlic, minced'[39m,
      [32m'* 1/4 cup extra virgin olive oil'[39m,
      [32m'* 1 teaspoon dried oregano'[39m,
      [32m'* 1/2 teaspoon dried basil'[39m,
      [32m'* Salt and freshly ground black pepper to taste'[39m,
      [32m'* 1/2 cup vegetable broth (or water)'[39m,
      [32m'* 2 tablespoons grated Parmesan cheese (optional)'[39m,
      [32m'* Fresh basil leaves, for garnish (optional)'[39m
    ],
    instructions: [ [32m'1. **Preheat your oven to 200Â°C (400Â°F).**'[39m ],
    score: [33m0[39m
  },
  {
    title: [32m'Arrosto di Riso al Forno con Peperoni e Cipolle (Baked Rice Roast with Peppers and Onions)'[39m,
    description: [32m'This recipe offers a unique take on rice, transforming it into a hearty, baked casserole with the sw... (Recipe 6 of 6)'[39m,
    ingredients: [
      [32m'* 1 large red onion, thinly sliced'[39m,
      [32m'* 2 red bell peppers, cored, seeded, and cut into strips'[39m,
      [32m'* 2 cups Arborio rice (or other short-grain rice)'[39m,
      [32m'* 1 (28 ounce) can crushed tomatoes'[39m,
      [32m'* 4 cups vegetable broth'[39m,
      [32m'* 1/2 cup grated Parmesan cheese (optional, for vegetarian variations use nutritional yeast)'[39m,
      [32m'* 2 cloves garlic, minced'[39m,
      [32m'* 2 tablespoons olive oil'[39m,
      [32m'* 1 teaspoon dried oregano'[39m,
      [32m'* 1/2 teaspoon dried basil'[39m,
      [32m'* Salt and freshly ground black pepper to taste'[39m,
      [32m'* Fresh basil leaves, for garnish (optional)'[39m
    ],
    instructions: [
      [32m'1. **Roast the vegetables:** Preheat your oven to 200Â°C (400Â°F). Toss the sliced onions and bell pepper strips with 1 tablespoon of olive oil, salt, and pepper on a large baking sheet. Roast for 20-25 minutes, or until the vegetables are tender and slightly caramelized.'[39m
    ],
    score: [33m0[39m
  }
]
Warning: command "node dist/apps/cooking-ai-api/main.js" exited with non-zero status code
  #  Node.js[56031]: void node::ResetStdio() at ../src/node.cc:739
  #  Assertion failed: !(err != 0) || (err == -1 && (*__errno_location ()) == 1)

----- Native stack trace -----

 1: 0xcc7bb7 node::Assert(node::AssertionInfo const&) [node]
 2: 0xc76804  [node]
 3: 0x7da2ffa47a76  [/lib/x86_64-linux-gnu/libc.so.6]
 4: 0x7da2ffa47bbe  [/lib/x86_64-linux-gnu/libc.so.6]
 5: 0xbd946f node::DefaultProcessExitHandlerInternal(node::Environment*, node::ExitCode) [node]
 6: 0xc37aaf node::Environment::Exit(node::ExitCode) [node]
 7: 0xf6e67f v8::internal::FunctionCallbackArguments::Call(v8::internal::CallHandlerInfo) [node]
 8: 0xf6eeed  [node]
 9: 0xf6f3b5 v8::internal::Builtin_HandleApiCall(int, unsigned long*, v8::internal::Isolate*) [node]
10: 0x1979df6  [node]

  #  Node.js[56031]: void node::ResetStdio() at ../src/node.cc:739
  #  Assertion failed: !(err != 0) || (err == -1 && (*__errno_location ()) == 1)

----- Native stack trace -----

 1: 0xcc7bb7 node::Assert(node::AssertionInfo const&) [node]
 2: 0xc76804  [node]
 3: 0xc76e1d node::TrapWebAssemblyOrContinue(int, siginfo_t*, void*) [node]
 4: 0x7da2ffa45330  [/lib/x86_64-linux-gnu/libc.so.6]
 5: 0x15a9ce0 v8::internal::tracing::TraceEventHelper::GetTracingController() [node]
 6: 0x1080685 v8::internal::Isolate::CaptureDetailedStackTrace(int, v8::StackTrace::StackTraceOptions) [node]
 7: 0xf0efa0 v8::StackTrace::CurrentStackTrace(v8::Isolate*, int, v8::StackTrace::StackTraceOptions) [node]
 8: 0xcc7b16 node::GetCurrentStackTrace(v8::Isolate*, int) [node]
 9: 0xc196ab node::DumpJavaScriptBacktrace(_IO_FILE*) [node]
10: 0xcc7bc3 node::Assert(node::AssertionInfo const&) [node]
11: 0xc76804  [node]
12: 0x7da2ffa47a76  [/lib/x86_64-linux-gnu/libc.so.6]
13: 0x7da2ffa47bbe  [/lib/x86_64-linux-gnu/libc.so.6]
14: 0xbd946f node::DefaultProcessExitHandlerInternal(node::Environment*, node::ExitCode) [node]
15: 0xc37aaf node::Environment::Exit(node::ExitCode) [node]
16: 0xf6e67f v8::internal::FunctionCallbackArguments::Call(v8::internal::CallHandlerInfo) [node]
17: 0xf6eeed  [node]
18: 0xf6f3b5 v8::internal::Builtin_HandleApiCall(int, unsigned long*, v8::internal::Isolate*) [node]
19: 0x1979df6  [node]
